<h2>Registros</h2>

<h3>Top 10 Ventas Más Caras</h3>
<table border="1">
  <tr>
    <th>ID</th>
    <th>Cliente</th>
    <th>Total</th>
  </tr>

  <% ventasMasCaras.forEach(venta => { %>
    <tr>
      <td><%= venta.id %></td>
      <td><%= venta.nombre_cliente %></td>
      <td>$<%= venta.total %></td>
    </tr>
  <% }) %>
</table>

<h3>Top 10 Productos Más Vendidos</h3>
<table border="1">
  <tr>
    <th>Producto</th>
    <th>Cantidad Vendida</th>
  </tr>

  <% productosMasVendidos.forEach(p => { %>
    <tr>
      <td>
        <%= p.Producto ? p.Producto.nombre : "Sin producto" %>
      </td>
      <td><%= p.dataValues.total_vendido %></td>
    </tr>
  <% }) %>
</table>

<h3>Últimos Inicios de Sesión</h3>
<table border="1">
  <tr>
    <th>Usuario</th>
    <th>Fecha</th>
    <th>Acción</th>
  </tr>

  <% logs.forEach(log => { %>
    <tr>
      <td><%= log.Usuario.email %></td>
      <td><%= new Date(log.fecha).toLocaleString() %></td>
      <td><%= log.accion %></td>
    </tr>
  <% }) %>
</table>

<h3>Estadísticas Generales</h3>
<table border="1">
  <tr>
    <th>Total Facturación</th>
    <th>Productos Activos</th>
  </tr>
  <tr>
    <td>$ <%= totalFacturacion || 0 %></td>
    <td><%= totalProductosActivos %></td>
  </tr>
</table>

<a href="/admin/registros/exportar">
  <button>Descargar Excel</button>
</a>

<br>
<a href="/admin/dashboard">Volver</a>